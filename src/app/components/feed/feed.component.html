<cdk-virtual-scroll-viewport
  *ngIf="!(postsPending$ | async); else spinner"
  appendOnly
  itemSize="100"
  class="example-viewport">
  <div class="post-wrapper" *ngFor="let post of posts$ | async">
    <app-post
      [post]="post"
      [comments]="getCommentsForPost$(post.id) | async"
      [commentsPending]="getCommentsForPostPending$(post.id) | async"
    ></app-post>
  </div>
</cdk-virtual-scroll-viewport>

<ng-template #spinner>
  <mat-spinner></mat-spinner>
</ng-template>

